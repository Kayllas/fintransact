<div class="min-h-screen bg-gray-50">
    <div class="surface-overlay py-3 px-6 shadow-2 flex align-items-center justify-content-between relative lg:static">
        <div class="flex align-items-center">
            <span class="text-900 font-medium text-2xl mr-4">FinTransact</span>
            <span class="text-600 font-medium text-xl">Welcome, {{currentUser.name}}</span>
        </div>
        <a pButton pRipple label="Logout" icon="pi pi-sign-out" class="p-button-text" (click)="logout()"></a>
    </div>

    <div class="p-5">
        <!-- Summary Cards -->
        <div class="grid mb-4">
            <div class="col-12 md:col-4">
                <div class="surface-card shadow-2 p-3 border-round">
                    <div class="flex justify-content-between mb-3">
                        <div>
                            <span class="block text-500 font-medium mb-3">Total Balance</span>
                            <div class="text-900 font-medium text-xl">{{ account.balance | currency:'USD' }}</div>
                        </div>
                        <div class="flex align-items-center justify-content-center bg-blue-100 border-round"
                            style="width:2.5rem;height:2.5rem">
                            <i class="pi pi-dollar text-blue-500 text-xl"></i>
                        </div>
                    </div>
                    <span class="text-500">Account: {{ account.accountNumber }}</span>
                </div>
            </div>
            <div class="col-12 md:col-4">
                <div class="surface-card shadow-2 p-3 border-round">
                    <div class="flex justify-content-between mb-3">
                        <div>
                            <span class="block text-500 font-medium mb-3">Income (Mock)</span>
                            <div class="text-900 font-medium text-xl">$5,200.00</div>
                        </div>
                        <div class="flex align-items-center justify-content-center bg-green-100 border-round"
                            style="width:2.5rem;height:2.5rem">
                            <i class="pi pi-arrow-up text-green-500 text-xl"></i>
                        </div>
                    </div>
                    <span class="text-green-500 font-medium">+12% </span>
                    <span class="text-500">since last month</span>
                </div>
            </div>
            <div class="col-12 md:col-4">
                <div class="surface-card shadow-2 p-3 border-round">
                    <div class="flex justify-content-between mb-3">
                        <div>
                            <span class="block text-500 font-medium mb-3">Expenses (Mock)</span>
                            <div class="text-900 font-medium text-xl">$1,450.00</div>
                        </div>
                        <div class="flex align-items-center justify-content-center bg-red-100 border-round"
                            style="width:2.5rem;height:2.5rem">
                            <i class="pi pi-arrow-down text-red-500 text-xl"></i>
                        </div>
                    </div>
                    <span class="text-red-500 font-medium">+5% </span>
                    <span class="text-500">since last month</span>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="surface-card shadow-2 p-4 border-round mb-4">
            <div class="text-xl font-medium text-900 mb-3">Quick Actions</div>
            <div class="flex gap-3">
                <button pButton pRipple label="New Transfer" icon="pi pi-send" class="p-button-outlined"
                    (click)="showTransferDialog()"></button>
                <button pButton pRipple label="Pix Area" icon="pi pi-bolt" class="p-button-outlined p-button-warning"
                    routerLink="/pix"></button>
                <button pButton pRipple label="Settings" icon="pi pi-cog" class="p-button-outlined p-button-secondary"
                    routerLink="/settings"></button>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="surface-card shadow-2 p-4 border-round">
            <div class="text-xl font-medium text-900 mb-3">Recent Transactions</div>
            <p-table [value]="transactions" [rows]="5" [paginator]="true" responsiveLayout="scroll">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Details</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-transaction>
                    <tr>
                        <td>{{ transaction.timestamp | date:'short' }}</td>
                        <td><span [class]="'customer-badge status-' + transaction.type">{{ transaction.type }}</span>
                        </td>
                        <td
                            [ngClass]="{'text-green-500': transaction.type === 'DEPOSIT' || (transaction.type === 'TRANSFER' && transaction.targetAccount.id === account.id), 'text-red-500': transaction.type === 'WITHDRAW' || (transaction.type === 'TRANSFER' && transaction.sourceAccount.id === account.id)}">
                            {{ transaction.amount | currency:'USD' }}
                        </td>
                        <td>
                            <span *ngIf="transaction.type === 'TRANSFER'">
                                {{ transaction.sourceAccount.id === account.id ? 'To: ' +
                                transaction.targetAccount.user.name : 'From: ' + transaction.sourceAccount.user.name }}
                            </span>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>

    <p-dialog header="Transfer Money" [(visible)]="displayTransferDialog" [modal]="true" [style]="{width: '400px'}"
        [draggable]="false" [resizable]="false">
        <div class="field">
            <label for="targetAccount" class="block">Target Account Number</label>
            <input type="text" pInputText id="targetAccount" [(ngModel)]="transferForm.targetAccountNumber"
                class="w-full" />
        </div>
        <div class="field mt-3">
            <label for="amount" class="block">Amount</label>
            <input type="number" pInputText id="amount" [(ngModel)]="transferForm.amount" class="w-full" />
        </div>
        <ng-template pTemplate="footer">
            <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text"
                (click)="displayTransferDialog=false"></button>
            <button pButton pRipple label="Transfer" icon="pi pi-check" (click)="onTransfer()" autofocus></button>
        </ng-template>
    </p-dialog>

    <p-toast></p-toast>
</div>